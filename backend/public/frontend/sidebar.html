<!-- Left Navigation Sidebar -->
<div class="w-64 bg-gray-800 text-white h-screen flex flex-col" ng-controller="SidebarController">
  <div class="px-4 py-6 flex items-center">
    <i class="fab fa-whatsapp text-2xl text-green-400 mr-3"></i>
    <h1 class="text-xl font-semibold">AutoPost WhatsApp</h1>
  </div>

  <nav class="flex-1 overflow-y-auto">
    <a href="#/dashboard" class="block px-4 py-3 hover:bg-gray-700 transition" ng-class="{'bg-gray-700': isActive('/dashboard')}">
      <i class="fas fa-tachometer-alt w-6 text-center mr-3 text-gray-400"></i>
      Dashboard
    </a>
    <a href="#/groups" class="block px-4 py-3 hover:bg-gray-700 transition" ng-class="{'bg-gray-700': isActive('/groups')}">
      <i class="fas fa-users w-6 text-center mr-3 text-gray-400"></i>
      Groups
    </a>
    <a href="#/events" class="block px-4 py-3 hover:bg-gray-700 transition" ng-class="{'bg-gray-700': isActive('/events')}">
      <i class="fas fa-calendar-alt w-6 text-center mr-3 text-gray-400"></i>
      Events
    </a>
    <a href="#/event-reminders" class="block px-4 py-3 hover:bg-gray-700 transition" ng-class="{'bg-gray-700': isActive('/event-reminders')}">
      <i class="fas fa-bell w-6 text-center mr-3 text-gray-400"></i>
      Event Reminders
    </a>
    <a href="#/schedules" class="block px-4 py-3 hover:bg-gray-700 transition" ng-class="{'bg-gray-700': isActive('/schedules')}">
      <i class="far fa-clock w-6 text-center mr-3 text-gray-400"></i>
      Schedules
    </a>
    <a href="#/direct-schedule" class="block px-4 py-3 hover:bg-gray-700 transition" ng-class="{'bg-gray-700': isActive('/direct-schedule')}">
      <i class="fas fa-paper-plane w-6 text-center mr-3 text-gray-400"></i>
      Direct Messages
    </a>
    <a href="#/sequences" class="block px-4 py-3 hover:bg-gray-700 transition" ng-class="{'bg-gray-700': isActive('/sequences')}">
      <i class="fas fa-bullhorn w-6 text-center mr-3 text-gray-400"></i>
      Drip Sequences
    </a>
    <a href="#/media" class="block px-4 py-3 hover:bg-gray-700 transition" ng-class="{'bg-gray-700': isActive('/media')}">
      <i class="far fa-image w-6 text-center mr-3 text-gray-400"></i>
      Media Library
    </a>
    <a href="#/settings" class="block px-4 py-3 hover:bg-gray-700 transition" ng-class="{'bg-gray-700': isActive('/settings')}">
      <i class="fas fa-cog w-6 text-center mr-3 text-gray-400"></i>
      Settings
    </a>
    <a href="#/users" class="block px-4 py-3 hover:bg-gray-700 transition" ng-class="{'bg-gray-700': isActive('/users')}" ng-if="user.role === 'admin'">
      <i class="fas fa-user-shield w-6 text-center mr-3 text-gray-400"></i>
      Users
    </a>
  </nav>

  <div class="px-4 py-6 border-t border-gray-700">
    <!-- Loading state -->
    <div ng-if="loadingUser" class="flex items-center space-x-2 mb-2">
      <div class="w-4 h-4 rounded-full border-2 border-gray-400 border-t-transparent animate-spin"></div>
      <span class="text-sm text-gray-400">Loading...</span>
    </div>
    
    <!-- Error state -->
    <p ng-if="userError" class="text-sm text-red-400 mb-2">
      <i class="fas fa-exclamation-circle mr-1"></i> 
      Error loading user
    </p>
    
    <!-- User info when available -->
    <p ng-if="!loadingUser && !userError && user.username" class="text-sm text-gray-400 mb-2">
      Logged in as <span class="font-semibold">{{user.username}}</span>
    </p>
    
    <!-- Logout button -->
    <button ng-click="logout()" 
            ng-disabled="loggingOut"
            class="w-full bg-gray-700 hover:bg-gray-600 text-white py-2 rounded flex items-center justify-center">
      <i class="fas fa-spinner fa-spin mr-2" ng-if="loggingOut"></i>
      <i class="fas fa-sign-out-alt mr-2" ng-if="!loggingOut"></i>
      <span ng-if="loggingOut">Logging out...</span>
      <span ng-if="!loggingOut">Logout</span>
    </button>
  </div>
</div>